version: 2

models:
  - name: int_customers
    description: "This model aggregates customer-level metrics, providing insights into lifetime value, retention, and engagement. It ensures that only the most recent data per customer is retained."
    columns:
      - name: customer_id
        description: "Unique identifier for the customer."
        tests:
          - unique
          - not_null

      - name: total_gross_revenue
        description: "Cumulative revenue generated by the customer."
        tests:
          - not_null

      - name: total_cashback_earned
        description: "Total cashback earned by the customer from transactions."
        tests:
          - not_null

      - name: total_cashback_redeemed
        description: "Total cashback redeemed by the customer."
        tests:
          - not_null

      - name: total_discount_applied
        description: "Total discounts applied to the customer's orders."
        tests:
          - not_null

      - name: total_cltv
        description: "Customer lifetime value (CLTV) based on transactions."
        tests:
          - not_null

      - name: total_orders
        description: "Total number of orders placed by the customer."
        tests:
          - not_null

      - name: acquisition_campaign
        description: "The marketing campaign through which the customer was acquired."

      - name: last_campaign_engaged
        description: "The most recent campaign the customer engaged with."

      - name: last_order_date
        description: "The date of the customer's most recent order."
        tests:
          - not_null

      - name: last_order_id
        description: "Unique identifier for the last order placed by the customer."
        tests:
          - not_null

      - name: last_partner_id
        description: "The partner (merchant) associated with the customer's last order."

      - name: days_since_last_order
        description: "Number of days since the customer's last order."

      - name: cashback_promo_status
        description: "Indicates whether the customer has used a cashback promotion."

      - name: created_at
        description: "Timestamp indicating when the record was created."
  